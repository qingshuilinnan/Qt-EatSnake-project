# Qt 贪吃蛇小游戏开发：从练手到实战  

## 零、项目背景  

作为 Qt 学习的练手项目，基于以下环境开发：  

- **系统**：Windows 11（x64）  
- **工具**：Qt Creator 17.0.0（Community 社区版）  
- **框架**：Qt 6.9.1  
- **编译**：MinGW 64 编译器  


## 一、基础玩法设计  

### 目标  

操控贪吃蛇在地图内移动，通过吞食食物实现 **“变长 + 得分 + 加速”** 循环，最终挑战历史最高分。  

### 操作逻辑  

| 按键        | 功能说明                    | 细节补充                           |
| ----------- | --------------------------- | ---------------------------------- |
| **W/A/S/D** | 控制移动方向（上/左/下/右） | 禁止“瞬间反向”（如向上时直接向下） |
| **空格**    | 暂停/恢复游戏               | 暂停时弹出提示框                   |
| **R**       | 重置游戏（重新开始）        | 清空蛇身、重置分数、重新生成食物   |
| **Q**       | 退出游戏确认                | 弹窗询问“是否退出”                 |


## 二、核心功能模块拆解  

### 1. 游戏逻辑层设计  

#### （1）蛇身运动机制  

- **基础移动**：通过 `QTimer` 定时更新蛇头坐标，身体节点自动跟随前驱节点移动；  
- **吞食成长**：检测到食物时，**保留尾部节点**并在头部插入新节点；  
- **常规移动**：无食物时，**删除尾部节点**并在头部插入新节点（模拟“前移”）。  

#### （2）食物生成规则  

- 随机坐标生成（基于窗口尺寸，步长与蛇身一致）；  
- 冲突检测：若食物坐标与蛇身重叠，**递归重新生成**，确保食物有效性。  

#### （3）死亡判定条件  

- **边界碰撞**：蛇头超出窗口范围（`x∈[0,820]` 且 `y∈[0,680]`）；  
- **自噬碰撞**：蛇头与身体节点坐标重叠。  


### 2. 体验优化方案  

#### （1）音效反馈体系  

- **背景音**：通过 `QMediaPlayer` 循环播放 BGM；  
- **交互音**：吞食食物、死亡时触发 **短音效**，强化操作反馈。  

#### （2）动态难度调节  

- 得分每累计 **50 分**，通过 `QTimer::setInterval()` 缩短定时器间隔，实现 **“得分越高 → 速度越快”**。  


### 3. 数据持久化设计  

通过 `QSettings` 实现 **“历史最高分”** 存储：  

- 存储路径：系统配置目录（Windows 注册表 / 其他系统配置文件）；  
- 逻辑：游戏结束时对比当前得分与历史记录，自动更新并弹窗展示。  


## 三、Qt 技术栈实现  

### 1. 界面渲染方案（`QPainter` 核心用法）  

| 渲染对象     | 实现方式                      | 关键代码示例                             |
| ------------ | ----------------------------- | ---------------------------------------- |
| **蛇头**     | 加载 PNG 图片（`QPixmap`）    | `painter.drawPixmap(x,y,img)`            |
| **蛇身**     | 绘制红色椭圆（`drawEllipse`） | 尺寸 `18x18` 避免与网格重叠              |
| **食物**     | 加载食物图片（`QPixmap`）     | 固定 `20x20` 尺寸                        |
| **地图**     | 背景图 + 网格线 + 边框线      | `drawPixmap` 绘制背景，`drawLine` 画网格 |
| **分数显示** | 实时文本渲染（`drawText`）    | 坐标固定在界面右下角                     |


### 2. 事件驱动体系  

#### （1）定时器核心逻辑  

- 启动方式：游戏初始化时通过 `QTimer::start(500)` 启动；  
- 暂停恢复：通过 `QTimer::stop()` / `start()` 控制游戏状态；  
- 加速逻辑：得分触发时，动态修改 `interval` 值。  

#### （2）键盘事件处理  

重写 `keyPressEvent`，通过 `switch-case` 分发按键逻辑

## 3.使用方法

1.编辑器中打开文件时按照下载的路径选择EatSnake.pro文件。

2.直接下载打包软件中的压缩包，可直接解压安装使用。
